---
title: SubQuiz Docs
date: 2025-04-13 19:40:00 +0800
author: CyanTachyon
categories:
  - project
  - SubQuiz
tags:
  - kotlin
  - vue
  - project
math: true
---
# 概述
[SubQuiz](https://quiz.subit.org.cn)原为[SubIT社团](https://subit.org.cn)开发的一款智能答题系统，之后该系统将移交北大附中科协，作为北大附中学生刷题练习网站，成为北大附中信息化的一部分。
# 功能
## 1.0
### 题目
题目结构及分类:
```
|- 学科1
|  |- 学科描述
|  |- 题目类型1
|  |  |- 题目类型描述(markdown可选)
|  |  |- 大题1
|  |  |  |- 大题描述(可选)
|  |  |  |- 权重(学生不可见，用于影响推荐概率)
|  |  |  |- 可见(若不可见则不会被推荐)
|  |  |  |- 小题1
|  |  |  |  |- 小题题目描述
|  |  |  |  |- 小题类型
|  |  |  |  |- 选项(仅单选/多选有选项)
|  |  |  |  |- 标准答案(学生作答期间不可见)
|  |  |  |  |- 解析(学生作答期间不可见)
|  |  |  |  |- 用户答案(作答后)
|  |  |  |- 小题2
|  |  |  |- 小题3
|  |  |- 大题2
|  |  |  |-...
|  |  |-...
|  |- 题目类型2
|  |  |- ...
|- 学科2
|  |- ...
|-...
```
即学科->题目类型->大题->小题

其中大题是推荐题目、计算得分、等等的基本单位。

每道小题的类型可以是以下5种之一：
- 单选
- 多选
- 判断
- 填空
- 简答

每道大题有自己独立的图片存储空间，可上传图片并通过markdown语法插入图片
### 测试
学生可以指定题目数量(大题数量)及学科(可选)开始一次测试，测试开始后，在测试结束并完成判卷前无法再次开始其他测试。

在答题过程中测试会自动保存。

可在答题记录中查看之前的全部测试。

若有未结束的测试可从答题记录中进入或在主页点开始新测试进入。
### 判卷
客观题(单选、多选、判断)由系统完成，简答和填空会将大题描述、小题描述、标准答案、用户答案合成提示词由大模型进行判卷
### 推荐
推荐即将全部符合要求的题目(可见、没有做过、学科限制)按“$权重\times错误率\times{random}$”进行排序

其中权重由老师设置，错误率是指该学生对于该题目类型的错误率，学生完成某道大题后按如下公式更新其对于该题目类型的错误率，其中$x$是这道大题的得分率
$$
new\leftarrow1-\left(0.95\times\left(1-old\right)+0.05\times{x}\right)
$$
### 权限
首先所有权限都分为4级，从低到高依次是：
- `BANNED`
- `NORMAL`
- `ADMIN`
- `ROOT`

权限分为全局权限和学科权限两种，学科权限指某一用户在某一学科的权限
#### 权限更改
若修改某人的全局权限，有如下限制：
- 自己的全局权限不低于`ADMIN`
- 若修改他人权限：自己的全局权限高于对方当前(修改前)的全局权限
- 若修改他人权限：自己的全局权限高于目标(修改后)的全局权限
- 若修改自己权限：修改后的权限不高于当前权限

若修改某人的某一学科的权限有如下限制：
- 若自己全局权限不低于`ADMIN`，则修改成功，忽略以下限制
- 自己在该学科的权限不低于`ADMIN`
- 若修改他人权限：自己在该学科的权限高于对方当前(修改前)在该学科的权限
- 若修改他人权限：自己在该学科的权限高于目标(修改后)在该学科的权限
- 若修改自己权限：修改后的权限不高于当前权限

#### 权限作用/限制
- 若全局权限为`BANNED`无法进行登陆
- 若全局权限为`ROOT`有权进入终端
- 若全局权限不低于`ADMIN`或在某一学科的权限不低于`ADMIN`则有权按上述权限修改规则修改自己/他人的全局权限/学科权限
- 若全局权限不低于`ADMIN`或在某一学科的权限不低于`ADMIN`，则有权编辑该学科的信息，包括但不限于学科名称、描述、增/删/改该学科的题目类型、增/删/改该学科下全部题目

## 2.0
主要调整结构,在学科下增加备课组概念，备课组下有知识点，知识点以树形结构存储，且对深度没有限制。知识点下有题目类型，这部分与1.0版本相同。
```
|- 学科1
|  |- 学科描述
|  |- 备课组1
|  |  |- 知识点文件夹
|  |  |  |- 知识点文件夹
|  |  |  |  |- 知识点1
|  |  |  |  |- 知识点2
|  |  |  |- 知识点3
|  |  |  |  |- 题目类型1
|  |  |  |  |  |- 题目类型描述(markdown可选)
|  |  |  |  |  |- 大题1
|  |  |  |  |  |  |- 大题描述(可选)
|  |  |  |  |  |  |- 权重(学生不可见，用于影响推荐概率)
|  |  |  |  |  |  |- 可见(若不可见则不会被推荐)
|  |  |  |  |  |  |- 小题1
|  |  |  |  |  |  |  |- 小题题目描述
|  |  |  |  |  |  |  |- 小题类型
|  |  |  |  |  |  |  |- 选项(仅单选/多选有选项)
|  |  |  |  |  |  |  |- 标准答案(学生作答期间不可见)
|  |  |  |  |  |  |  |- 解析(学生作答期间不可见)
|  |  |  |  |  |  |  |- 用户答案(作答后)
|  |  |  |  |  |  |- 小题2
|  |  |  |  |  |  |- 小题3
|  |  |  |  |  |- 大题2
|  |  |  |  |  |  |-...
|  |  |  |  |  |-...
|  |  |  |  |- 题目类型2
|  |  |  |  |  |- ...
|- 学科2
|  |- ...
|-...
```

# 开发
## 项目结构及技术栈
整体采用前后端分离
### 后端
- 语言: [Kotlin](https://kotlinlang.org)
- Web框架: [Ktor](https://ktor.io)
- SQL数据库: [PostgreSQL](https://www.postgresql.org/)
- 数据库交互: [Exposed](https://www.jetbrains.com/help/exposed/home.html)([Github](https://github.com/JetBrains/Exposed))
- 文件存储: [腾讯云COS](https://cloud.tencent.com/product/cos)

### 前端
- 框架: [Vue](https://vuejs.org/)
- 语言: [TypeScript](https://www.typescriptlang.org/)+[SCSS](https://sass-lang.com/)
- 安卓: [Capacitor](https://capacitorjs.com/)
